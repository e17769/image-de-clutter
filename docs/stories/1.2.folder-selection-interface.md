# Story 1.2: Basic Folder Selection Interface

## Status
Draft

## Story
**As a** user,
**I want** to select a folder to scan for images,
**so that** I can specify which directory contains the photos I want to analyze.

## Acceptance Criteria
1. Main window includes a "Choose Folder" button that opens native macOS folder picker
2. Selected folder path is displayed in a text field
3. Only directories can be selected (files are filtered out)
4. Selected path is validated to ensure it exists and is readable
5. Error message is shown if selected folder cannot be accessed
6. Folder selection state is maintained during the application session

## Tasks / Subtasks
- [ ] Task 1: Create folder selection UI components (AC: 1, 2)
  - [ ] Add "Choose Folder" button to main window
  - [ ] Add text field to display selected folder path
  - [ ] Implement proper layout and spacing for macOS HIG
- [ ] Task 2: Implement native macOS folder picker (AC: 1, 3)
  - [ ] Use QFileDialog with directory-only selection
  - [ ] Configure dialog for macOS native appearance
  - [ ] Filter selection to directories only
- [ ] Task 3: Add path validation and error handling (AC: 4, 5)
  - [ ] Validate selected path exists and is readable
  - [ ] Check file system permissions
  - [ ] Display user-friendly error messages for access issues
  - [ ] Handle edge cases (network drives, symlinks, etc.)
- [ ] Task 4: Implement session state management (AC: 6)
  - [ ] Store selected folder path in application state
  - [ ] Persist selection across UI operations
  - [ ] Clear selection when appropriate
- [ ] Task 5: Add unit tests for folder selection logic
  - [ ] Test path validation functions
  - [ ] Test error handling scenarios
  - [ ] Mock file system operations for testing

## Dev Notes

### User Personas Impact
- **Primary User (Sarah - Family Archivist)**: Needs simple, intuitive folder selection
- **Secondary User (Marcus - Professional)**: May work with network drives and complex paths
- **Tech User (David)**: Expects keyboard shortcuts and drag-drop support (future)

### UI Requirements (From PRD)
- Follow macOS Human Interface Guidelines
- Native folder picker integration
- Clear visual feedback for selected path
- Accessible design (WCAG AA compliance)

### Technical Implementation
- Use PyQt6/PySide6 QFileDialog for native macOS integration
- QFileDialog.getExistingDirectory() for directory selection
- Path validation using os.path and pathlib
- Error handling for permission and access issues

### File System Considerations
- Handle macOS-specific path formats
- Consider case sensitivity on macOS
- Support for network mounted drives
- Proper handling of symbolic links
- Unicode path support for international filenames

### Error Scenarios to Handle
- Selected folder doesn't exist
- Permission denied errors
- Network drive disconnections
- Invalid path characters
- Very long path names

### Testing Requirements
- Unit tests for path validation logic
- Mock file system operations for consistent testing
- Test various macOS path formats
- Error condition testing
- UI interaction testing with pytest-qt

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2024-12-20 | 1.0 | Initial story creation | Scrum Master |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by Dev Agent*

### Debug Log References
*To be filled by Dev Agent*

### Completion Notes List
*To be filled by Dev Agent*

### File List
*To be filled by Dev Agent*

## QA Results
*This section will be populated by the QA Agent during review*
